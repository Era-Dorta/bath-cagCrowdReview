%----------------------------------------------------------------------------------------

%\documentclass[paper=a4, fontsize=11pt]{scrartcl} % A4 paper and 11pt font size
\documentclass[11pt]{article}
\usepackage{multicol}

\usepackage[english]{babel} % English language/hyphenation
\usepackage{amsmath,amsfonts,amsthm} % Math packages
\usepackage{mathtools}
\usepackage[margin=2.5cm]{geometry}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{url}
\usepackage{mdframed}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{natbib}

\usepackage{fancyhdr} % Custom headers and footers
\pagestyle{fancyplain} % Makes all pages in the document conform to the custom headers and footers
\fancyhead{} % No page header - if you want one, create it in the same way as the footers below
\fancyfoot[L]{} % Empty left footer
\fancyfoot[C]{} % Empty center footer
\fancyfoot[R]{\thepage} % Page numbering for right footer

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\newcommand{\horrule}[1]{\rule{\linewidth}{#1}} % Create horizontal rule command with 1 argument of height

\title{	
\normalfont \normalsize 
\textsc{Department Of Computer Science, University of Bath} \\ [5pt] % Your university, school and/or department name(s)
\textsc{EngD in Digital Entertainment} \\ [5pt] 
\horrule{0.7pt} \\[0.2cm] % Thin top horizontal rule
\Huge A review on crowd simulation and rendering \\ % The assignment title
\vspace{7 mm}
\Large CM50244 \: Computer Animation and Games I \\
\horrule{0.7pt} \\[0.0cm] % Thick bottom horizontal rule
}
\author{Garoe Dorta-Perez \\ \Large Unit Leader: Prof Phil Willis \\}  % Your name\\ 

\begin{document}
\vspace*{\fill}
\begin{center}
	\begin{minipage}{1.0\textwidth}
		\maketitle % Print the title
		\thispagestyle{empty}
	\end{minipage}
\end{center}

\vfill %Space after the title
\begin{abstract}
In this we present a survey on crowd simulation techniques.
The whole crowd simulation pipeline is discussed.
Including crowd generation and editing, behaviour simulation, with path and collision avoidance, and rendering techniques.
For each relevant area or group, a representative paper is chosen, important contributions are outlined and recent research breakthroughs are given.
\end{abstract}
\vfill %Space after the abstract

% IMPORTANT
% ------------------------------------
% HAS TO has 2000 words
% ------------------------------------

\clearpage %Start a new page
\setcounter{page}{1}

\begin{multicols}{2}

\section{Introduction}
\label{intro}

%Include why crowd simulation is interesting in films and videogames????
Crowds are encountered frequently, be it a large number of people in big shopping area, on a popular sports event, or at a demonstration.
While also other types of crowds are also common, such as schools of fish or flocks of birds.
While motives for simulating them range from: \textit{film industry} where it is not always possible or economically viable to have a real crowd,also in \textit{video games} as the game world might have need for a crowd, including \textit{disaster prevention and management} where they are used to aid in the decision making process as they provided a new source of data.

A crowd is much more than the collections of individuals that form it.
And as such the behaviour of the individuals could be affected by other members of the crowd.
History shows how in some cases crowd of people behave in a well organized manner, while in others its individual act selfishly abandoning all social norms.
When simulating this interactions with a naive approach, as the numbers of individuals in the crowd increase the computational cost of the interrelations calculation increments exponentially.

This problem has actually a number of clearly differentiated areas.
Firstly there is a \textit{crowd generation} problem, a modeller needs user-friendly tools in order to set up a scene in which a crowd is present.
Secondly the crowd is an evolving entity, so a \textit{crowd dynamics model} is required to govern the state of the crowd over time.
Thirdly, the model should be presented to the user, so a \textit{rendering} stage is needed.

Crowd simulation and rendering has been an active research area as early as 1987 with a simulation of flocks of birds by \cite{Reynolds1987}.
The author proved that a coherent global behaviour could be achieved by implementing a number of local rules in each entity.

\section{Classifications}

A clear line can be drawn between real-time simulation (games) and non real-time simulation (films).
Since the requirements for each simulation are quite different and so are the techniques used in each area.
However, with such a broad area, a more detailed exploration is required.
Consequently, each of the stages defined in section~\ref{intro} will be treated independently.

\subsection{Modelling Classifications}

In order to simulate crowd behaviour a number of approaches have been proposed.
As they share certain similarities, they can be divided using a common criteria such as the simulation time  and the size of the modelled crowd.
Regarding time, we have short-term simulations, medium-term simulations and long-term simulations.
While in terms of size, a distinction can be made among small, medium and big size crowds.
The type of model used for the agents in the crowd can also be used as a criteria.
Therefore there are \textbf{entity based} simulations, where all individuals are homogeneous, or \textbf{agent based} simulations, where each individual is intelligent and autonomous.

Generally, agent based or entity based systems are used for small and medium crowds.
While for big size crowds, due to their challenging nature, \textbf{flow based} simulations are adopted as the most common approach.

\subsection{Rendering Classifications}

The different types of rendering techniques can be classified in the following groups.
\textbf{Dynamic mesh decimation}, progressive meshes are used to obtain a coarser representation of the model mesh,~\cite{Hoppe1996}.
\textbf{Dynamically generated impostors}, this procedure involves displaying 2D billboards with fixed poses instead of the full model,~\cite{Aubel2000}.
\textbf{Point-rendering} techniques build multi-resolution representations using point samples from the mesh,~\cite{Wand2002}.

\section{Generating crowds}

Before the crowd can be simulated or rendered it has to be generated.
Unfortunately, this task has not been researched as deeply as the rest.
This step essentially involves defining the initial parameters at which the crowd operates.
For example, crowd size, goals, ..., and can also include visual parameters such as color or models for the agents.

\cite{Ulicny2004} proposed a brush metaphor to manipulate crowds.
The author technique provides tools for the user in the form of a brush operator(create individuals, change color, etc) and then the user can apply them in the crowd world space.
Edited individuals in the crowd will be those in sight in the screen domain.
Therefore an intuitive approach is provided, as it is similar to what users as used to.
However it has certain limitations, such as lack of direct control over crowd behaviour or difficulty to select individuals in cluttered environments.

Some of the challenges were met by \cite{Jordao2014}, whose method introduces the concept of crowd patches.
Such areas allow the user to control the crowd through a sculpting metaphor.
While also addressing the problem of populating vast empty areas efficiently.
High level control of the motion is provided as the patches are editable in real time.
%Or the high level of control is provided through to uses of patches????

CHECK EACH PAPER HAS IT'S DRAWBACKS WRITTEN

\section{Simulating crowds}

As stated in section~\ref{intro}, following a naive approach leads to intractable simulation times in anything bigger than a small sized crowd.
The following approaches haven been proposed.

\subsection{Entity based Based}

\cite{Helbing2000} proposed a model for where individuals are represented as particles with velocity, mass and forces.
The actual individual desired is encoded in such components.
The model was created to simulate pedestrians in panic situations.
\cite{batty2003} introduced a similar pedestrian model although for carnivals and parades.
This model is based on a cellular automata where an individual step would be moving from the current cell to the next one.
The model is constrained to evaluating safety policies and it only has an offline work mode.

\subsection{Agent Based}

\cite{helbing2002} did a complete study of a broad range scenarios of crowd behaviour, in panic and not panic situations.
Providing a consistent  pedestrian common model for them.
\cite{raupp2001} presented a three fold approach to agent based simulations: scripted behaviours, behavioural rules with events and reactions and external control to guide the behaviour.
By controlling the complexity of the behaviours by group settings a flexible framework for controlling the crowd is provided.
More recent techniques add a counterflow paradigm, where agents not only take into account trail formation but also collision avoidance~\cite{heliovaara2012}.
Since previous methods created unrealistic jams and collision in counterflow situations.
Nevertheless, this model is still quite simplistic......, real-time or not real-time???

\subsection{Flow Based}

\cite{hughes2003} proposed a flow model method to simulate large crowd behaviour.
By using intelligent fluid flow, which is makes the fluid prefer certain paths, i.e. avoiding excessive congestive areas, a working model for pedestrian simulation was achieved.
However it would not account for crowd flow in the individual speed.
Therefore lane formation is not observed. 
The previous model was improved by \cite{treuille2006} by adding continuum dynamics.
Fixing the afore mention problems as well as undesirable dynamics oscillations in Hughes's model. 

\subsection{Hybrid models}

\cite{Narain2009} presented a agent-fluid hybrid model.
Each agent has a preferred velocity and path, however on densely populated regions a incomprehensibility flow factor comes into play.
This factor prevents the agents from packing together too closely.
More recently \cite{lin2014} proposed also a  agent-fluid hybrid solution to long-range collision avoidance.
When a the density is below a certain threshold a discrete collision avoidance is used.
While after the threshold a fluid based lookahead algorithm is used.
This technique allows for increasingly complex behaviour such as a bigger group splitting in two to make space for a smaller group to go through it.

\section{Rendering crowds}

The main obstacle to overcome with crowd rendering is the amount of characters to be rendered.
Hence, the following techniques are design to make the rendering stage cheaper.
Generally by applying a model complexity reduction that is still visually unnoticeable.

As a general trend, there has been a shift of computation from the CPU to the programmable GPU with substantial increases in performance.

\subsection{Dynamic Mesh Decimation}

Progressive meshes were introduced by~\cite{Hoppe1996} as a compressed alternative to a traditional mesh.
However this meshes can be used as a coarser representation, and consequently increasing performance.
Provided that the decimation calculation is smaller than the total gain.
A progressive mesh refinement GPU implementation was proposed by~\cite{Hu2009}.

%Notes for the future, change to something better
They never compare with other implementations, neither CPU or GPU.
It looks like their code is not optimized and they only wanted to prove feasibility of the implementation. 

\subsection{Dynamically Generated Impostors}
\label{subsec:DimGenImpostors}

Impostors are 2D pre-computed billboards used instead of the full 3D human model, thus reducing the cost of the rendering stage as shown by~\cite{Aubel2000}.
However, when an impostor is rendered to an area larger than the impostor resolution, pixels from the impostor texture become noticeable.
~\cite{Millan2006} presented a GPU impostor implementation, which also used pseudo-instancing for further performance gains~\cite{zelsnack2004glsl}.
More recent advances were made by~\cite{Ghiletiuc2013} with a client-server approach for mobile devices.

\subsection{Point-Rendering}

Point rendering uses points as a primitive to reduce the model complexity of the individuals in the crowd.
Using less and less points as the model is further away from the camera.
Multi-resolution point sample rendering in key frame animations achieves a rendering time independent of the complexity of the geometric model~\cite{Wand2002}.
~\cite{Larkin2010} presented a point-rendering method that would render at real-time by limiting the resources of the whole crowd and deciding each level of detail using Delaunay triangulation. 
Where each vertex in the triangulation has a density value that is used to calculate the number of points to render.
With small and medium crowds this technique works best, since with very large crowds the resources allocated for each instance might be too scarce.

\subsection{Achieving variety}

There is a lot of research into getting color variety, height change, accessories, animation variety.
As they provided a cheap way to have a varied crowd and with instancing, which is desirable as discussed in section~\ref{subsec:DimGenImpostors}.

Crowds in specific situations has been simulated, for example \cite{deHeras2005} work with a virtual Roman crowd in an urban environment.
In this paper they avoided computing each characterâ€™s mesh deformation using a precomputed deformed one for each frame.
As well as applying color modulation accelerated hardware on instances of the same individual model.

\section{Conclusion}

- Generation is an under-researched area, but crowd brush metaphor solve may of the issues
- Simulation still sacrifices a lot with large crowds -> flow approach
- Agent based simulations are becoming predominant, difficult to find papers with the other paradigms
- Rendering there has a been a lot of work, previous processing in CPU moved to GPU
- LOD techniques quite refined now, a lot of it is automatic, like LOD model generations or edition

%\bibliographystyle{acmsiggraph}
\bibliographystyle{apalike}
\bibliography{template}
\end{multicols}
\end{document}
